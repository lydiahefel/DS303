---
title: "Practice: Simple Linear Regression"
author: 
  - "Lydia Hefel"
  - "DS303, SP25"
  - "Prof. Amber Camp"
date: 1/23/26
format: html
editor: visual
theme: spacelab
---

## Introduction to Simple Linear Regression

This is an introduction to **simple linear regression**, a method used to model the relationship between two variables by fitting a straight line to the data. The goal is to see how one variable (the independent variable) affects another (the dependent variable).

For example, you might predict a student’s test score (dependent variable) based on study hours (independent variable). Simple linear regression helps find a trend or regression line that best fits the data, allowing you to make predictions for varying study hours.

Simple linear regression is useful for studying **cause-and-effect** or **making predictions**, especially when the relationship between the variables is linear. It works best with **continuous data**.

## *y* = *mx* + *b* ?

We discussed in class the other day about the basic regression equation. I presented it as:

*y* = *b~0~* + *b~1~x*

Many of you quickly noticed the similarity between *y* = *b~0~* + *b~1~x* and *y* = *mx* + *b.* And you're right–they are both basically the same formula for a straight line. Is there any actual difference at all?

Yes! Despite, again, basically being the same thing, the difference in notation depends on context (when we use the two and how we discuss them). See what you can find online about this, and feel free to discuss with those around you.

### Question 1

What is the difference between *y* = *b~0~* + *b~1~x* and *y* = *mx* + *b*, and when might we use one over the other? Please use your own words

#### Answer:

The first equation is used more commonly for regression models, *b~0~* and *b~1~* are predicted values, and the outcome shows how the x variable affects the y variable. The second equation is used primarily for linear equations, m and b are defined values, and the outcome shows the trend of the x and y variables.

### Question 2

Think back to our class discussion and your previous studies in math. Tell me below what each part of the equation *y* = *b~0~* + *b~1~x* means. Do this from memory if you can!

#### Answer:

For this equation, y is the predicted outcome, x is the predictor variable, *b~0~* is the y outcome when x is 0, and *b~1~* is the affect on the y variable in terms of one unit of the x variable.

## Let's try it

Start by loading the `ISLR2` package, which is a very large collection of datasets and functions that accompanies the textbook [*An Introduction to Statistical Learning*](https://www.statlearning.com). You may need to install `ISLR2` and `lme4` if you haven't already.

```{r, echo = FALSE, message = FALSE}
# install.packages("ISLR2")
# install.packages("lme4")

library(ISLR2)
library(lme4)
library(ggplot2)
```

## Boston Housing Data

The `ISLR2` library contains the `Boston` data set, which records `medv` (median house value) for 506 census tracts in Boston. We will seek to predict `medv` using 12 predictors such as `rm` (average number of rooms per dwelling), `age` (proportion of owner-occupied units built prior to 1940) and `lstat` (percent of households with low socioeconomic status).

### Question 3

You can just call upon the data (it's already in the package). I'll get you started, but show me below how you'd explore the data even further by adding code in the below code chunk.

```{r}
head(Boston)
summary(Boston)
??Boston
```

We learned in class that we can apply a simple linear regression using `lm`. Here is the basic format:

> `model <- lm(y ~ x, data = df)`

### Question 4

Use the above basic format to create a linear regression model to predict the **median home value** (`medv`) based on the **number of rooms per dwelling** (`rm`), using the data from the `Boston` dataset. Assign it to the variable `lm.model`.

```{r}
lm.model <- lm(medv ~ rm, data = Boston)
```

If you set it up right, you should be able to run your model name in the below code chunk and view the basic model output. Give it a try:

```{r}
lm.model
```

### Question 5

What is your model output telling you?

#### Answer

The model is not very good. The model output says that when there are no rooms, the median value of the house - \$34,671, and for each one unit increase in the number of rooms, there is a \$9,102 increase in the median value of the house. This isn't plausible because even a one or two room house is still predicted to have a negative median value.

You can also try `summary(lm.model)`.

```{r}
summary(lm.model)
```

### Question 6

What additional information do you get from this summary of the model output?

#### Answer

The multiple R-squared value shows that 48.35% of the variance of median home value can be accounted for by the number of rooms. The low p-value indicates that the average number of rooms per dwelling is statistically significant in predicting the median value of owner-occupied homes in \$1000s. The summary also gives the range of residuals and the standard error.

## confint() and predict()

In order to obtain a confidence interval for the coefficient estimates, we can use the `confint()` command. The `predict()` function can be used to produce confidence intervals and prediction intervals for the prediction of `medv` for a given value of `rm`. Run these and see if you can figure out what it is telling you.

```{r}
confint(lm.model)

predict(lm.model, data.frame(rm = (c(4, 6, 8))), interval = "confidence")

predict(lm.model, data.frame(rm = (c(4, 6, 8))), interval = "prediction")
```

### Question 7

What do you think the above `confint()` and `predict()` information means? It's okay to guess or use online tools to explore.

#### Answer

`confint()`  - The model has a 95% confidence that the intercept (the median value of a house when the number of rooms equals zero) is between roughly -\$39,877 and -\$29,465 and that for each one unit increase in the number of rooms, there is between roughly \$8,279 and \$9,925 increase in the median value of the house.

`predict()`  - The model uses past data to create confidence intervals and prediction intervals for the prediction of `medv` for a given value of `rm`, in this case 4, 6, 8. For 4 rooms, the model created a confidence interval of median home values roughly between -\$229 and \$3,705, meaning that based on the data used a house with 4 rooms will be valued within that interval. The model created a prediction interval of median home values roughly between -\$11,409 and \$14,885, meaning that based on the data used a house with 4 rooms is predicted to be valued within that interval.

## Visualizing

Here is a simple base R way to plot this data:

```{r}
plot(Boston$rm, Boston$medv)
abline(lm.model)
```

### Question 8

Can you convert the above code chunk to `ggplot`? Try below. Have fun with editing the appearance of your plot if you'd like :)

```{r}
ggplot(Boston, aes(rm, medv)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE)
```

In a future class, we'll explore some diagnostic plots and what that means for evaluating models. For now, just run the below and have a look. Have you seen these before?

```{r}
par(mfrow = c(2, 2))
plot(lm.model)
```

## Run another model

Now it's your turn to apply a linear regression to other variables from the Boston dataset.

You can view the dataset by running `View(Boston)` or read about the variables by running `??ISLR2::Boston`.

### Question 9

What variables are you interested in exploring using a linear regression? Just pick an `x` and a `y` and describe your research question below in plain English. You are welcome to explore a multiple regression (more than one predictor), like we began exploring last class, but I recommend just sticking to one predictor until you are comfortable.

#### Answer

How does the pupil-teacher ratio by town (`ptratio`) influence the median value of owner-occupied homes in \$1000s (`medv`)?

### Question 10

#### Part 1

Build and run your model and examine the model output:

```{r}
lm.model <- lm(medv ~ ptratio, data = Boston)
summary(lm.model)
```

#### Part 2

Explain what you found in plain English. Do your best.

#### Answer

The multiple R-squared value shows that 25.78% of the variance of median home value can be accounted for by the pupil-teacher ratio by town. The low p-value indicates that the pupil-teacher ratio by town is statistically significant in predicting the median value of owner-occupied homes in \$1000s.

## The end!

That's it for now. Please feel free to raise questions in class or via email!
